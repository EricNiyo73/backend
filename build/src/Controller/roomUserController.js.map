{"version":3,"file":"roomUserController.js","names":["_roomUserModel","_interopRequireDefault","require","obj","__esModule","default","createRoom","req","res","next","newRoom","Room","body","savedRoom","save","status","json","err","exports","updateRoom","updatedRoom","findByIdAndUpdate","params","id","$set","new","updateRoomAvailability","updateOne","$push","dates","deleteRoom","findByIdAndDelete","getRoom","room","findById","getRooms","rooms","find"],"sources":["../../../src/Controller/roomUserController.js"],"sourcesContent":["import Room from \"../model/roomUserModel.js\";\r\n// import { createError } from \"../utils/error.js\";\r\n\r\n// ==================creation of availability room===========\r\nexport const createRoom = async (req, res, next) => {\r\n  const newRoom = new Room(req.body);\r\n\r\n  try {\r\n    const savedRoom = await newRoom.save();\r\n    res.status(200).json(savedRoom);\r\n  } catch (err) {\r\n    next(err);\r\n  }\r\n};\r\n\r\n// ==================update room==========================\r\n\r\nexport const updateRoom = async (req, res, next) => {\r\n    try {\r\n      const updatedRoom = await Room.findByIdAndUpdate(\r\n        req.params.id,\r\n        { $set: req.body },\r\n        { new: true }\r\n      );\r\n      res.status(200).json(updatedRoom);\r\n    } catch (err) {\r\n      next(err);\r\n    }\r\n  };\r\n\r\n//   =======================update availability=========================\r\n\r\nexport const updateRoomAvailability = async (req, res, next) => {\r\n    try {\r\n      await Room.updateOne(\r\n        { \"roomNumbers._id\": req.params.id },\r\n        {\r\n          $push: {\r\n            \"roomNumbers.$.unavailableDates\": req.body.dates\r\n          },\r\n        }\r\n      );\r\n      res.status(200).json(\"Room status has been updated.\");\r\n    } catch (err) {\r\n      next(err);\r\n    }\r\n  };\r\n\r\n//   ==============================delete ==========================\r\n\r\nexport const deleteRoom = async (req, res, next) => {\r\n    try {\r\n      await Room.findByIdAndDelete(req.params.id);\r\n      res.status(200).json(\"Room has been deleted.\");\r\n    } catch (err) {\r\n      next(err);\r\n    }\r\n  };\r\n\r\n//   ==============================get one room================================\r\nexport const getRoom = async (req, res, next) => {\r\n    try {\r\n      const room = await Room.findById(req.params.id);\r\n      res.status(200).json(room);\r\n    } catch (err) {\r\n      next(err);\r\n    }\r\n  };\r\n//   ==========================get rooms availability==========================\r\nexport const getRooms = async (req, res, next) => {\r\n    try {\r\n      const rooms = await Room.find();\r\n      res.status(200).json(rooms);\r\n    } catch (err) {\r\n      next(err);\r\n    }\r\n  };"],"mappings":"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"}